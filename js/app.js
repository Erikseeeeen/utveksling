(function(){"use strict";var e={795:function(e,t,r){var n=r(821);const s={class:"app-container",style:{"margin-top":"1.3rem"}},i={class:"centered-container",style:{"margin-bottom":"1rem"}},a={class:"centered-container"},o={class:"centered-container",style:{"margin-top":"1rem"}},l={class:"centered-container",style:{"margin-top":"1rem"}};function u(e,t,r,u,p,c){const d=(0,n.up)("utveksling-logo"),m=(0,n.up)("leaflet-map"),g=(0,n.up)("dropdown-textfield"),f=(0,n.up)("university-cards");return(0,n.wg)(),(0,n.iD)("div",s,[(0,n._)("div",i,[(0,n.Wm)(d)]),(0,n._)("div",a,[(0,n.Wm)(m,{universities:this.universities},null,8,["universities"])]),(0,n._)("div",o,[(0,n.Wm)(g,{onLastInputProgram:c.handleTextFieldEvent},null,8,["onLastInputProgram"])]),(0,n._)("div",l,[(0,n.Wm)(f,{last_input_program:this.last_input_program,universities:this.universities},null,8,["last_input_program","universities"])])])}const p=e=>((0,n.dD)("data-v-40903402"),e=e(),(0,n.Cn)(),e),c={class:"map-container"},d=p((()=>(0,n._)("br",null,null,-1))),m={key:0},g={key:1};function f(e,t,r,s,i,a){const o=(0,n.up)("l-tile-layer"),l=(0,n.up)("l-popup"),u=(0,n.up)("l-circle-marker"),p=(0,n.up)("l-map");return(0,n.wg)(),(0,n.iD)("div",c,[(0,n.Wm)(p,{ref:"map",zoom:i.zoom,"onUpdate:zoom":t[0]||(t[0]=e=>i.zoom=e),center:i.mapCenter},{default:(0,n.w5)((()=>[(0,n.Wm)(o,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png","layer-type":"base",name:"OpenStreetMap"}),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(r.universities,((e,t)=>((0,n.wg)(),(0,n.j4)(u,{key:t,"lat-lng":[e.lat,e.lng],radius:6*Math.sqrt(e.number_of_students),color:e.number_of_students?"red":"transparent"},{default:(0,n.w5)((()=>[(0,n.Wm)(l,null,{default:(0,n.w5)((()=>[(0,n._)("i",null,(0,n.zw)(e.name),1),d,(0,n.Uk)(" "+(0,n.zw)(e.number_of_students)+" ",1),e.number_of_students>1?((0,n.wg)(),(0,n.iD)("span",m," rapporter fra "+(0,n.zw)(this.input_program),1)):((0,n.wg)(),(0,n.iD)("span",g," rapport fra "+(0,n.zw)(this.input_program),1))])),_:2},1024)])),_:2},1032,["lat-lng","radius","color"])))),128))])),_:1},8,["zoom","center"])])}var h=r(713),y=r(254),_={components:{LMap:h.iA,LTileLayer:h.Hw,LCircleMarker:h.A0,LPopup:h.Q2},data(){return{zoom:2,mapCenter:[47.41322,-1.219482],input_program:"datateknologi"}},props:{universities:{type:Array,required:!0}},methods:{fetchInputProgram(){y.Z.get("/api/input_program").then((e=>{this.input_program=e.data["text"],console.log(e)})).catch((e=>{console.error("Error fetching input_program:",e)}))}}},v=r(744);const w=(0,v.Z)(_,[["render",f],["__scopeId","data-v-40903402"]]);var b=w;const k={class:"input-container"},x={key:0,class:"dropdown-list"},T=["onClick"],S={class:"styled-button-container"},C=["value"];function O(e,t,r,s,i,a){return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",k,[(0,n.wy)((0,n._)("input",{class:"styled-input","onUpdate:modelValue":t[0]||(t[0]=e=>i.selected_program=e),onInput:t[1]||(t[1]=(...e)=>a.filterPrograms&&a.filterPrograms(...e)),placeholder:"Skriv inn studieretning"},null,544),[[n.nr,i.selected_program]]),i.showDropdown&&i.filtered_programs.length>0?((0,n.wg)(),(0,n.iD)("ul",x,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(i.filtered_programs,(e=>((0,n.wg)(),(0,n.iD)("li",{key:e.id,onClick:t=>a.selectProgram(e)},(0,n.zw)(e),9,T)))),128))])):(0,n.kq)("",!0)]),(0,n._)("div",S,[(0,n._)("button",{class:"styled-button",onClick:t[2]||(t[2]=(...e)=>a.buttonClicked&&a.buttonClicked(...e))},"Søk")]),(0,n._)("input",{type:"hidden",name:"csrfmiddlewaretoken",value:i.csrfToken},null,8,C)],64)}var D={data(){return{programs:[],filtered_programs:[],selected_program:"",csrfToken:null,showDropdown:!0}},emits:["last-input-program"],methods:{filterPrograms(){if(this.showDropdown=!0,"string"===typeof this.selected_program&&""!==this.selected_program.trim()){const e=this.selected_program.toLowerCase();this.filtered_programs=this.programs.filter((t=>t.toLowerCase().includes(e)))}else this.filtered_programs=this.programs},buttonClicked(){const e={"X-CSRFToken":this.csrfToken};y.Z.post("/api/input_program/",{text:this.selected_program},{headers:e}).then((e=>{console.log(e.data.message)})),this.$emit("last-input-program",{name:this.selected_program})},selectProgram(e){this.selected_program=e,this.showDropdown=!1},fetchPrograms(){y.Z.get("/api/program").then((e=>{this.programs=e.data.map((e=>e.name))})).catch((e=>{console.error("Error fetching program names:",e)}))},getCookie(e){const t=`; ${document.cookie}`,r=t.split(`; ${e}=`);if(2===r.length)return r.pop().split(";").shift()},saveToLocalStorage(){localStorage.setItem("selected_program",this.selected_program)},loadFromLocalStorage(){this.selected_program=localStorage.getItem("selected_program")||"",this.$emit("selected-program",{name:this.selected_program})}},created(){this.csrfToken=this.getCookie("csrftoken"),this.loadFromLocalStorage()},mounted(){this.fetchPrograms()},watch:{selected_program(){this.saveToLocalStorage()}}};const A=(0,v.Z)(D,[["render",O],["__scopeId","data-v-ead70de2"]]);var I=A;const z=e=>((0,n.dD)("data-v-369946fd"),e=e(),(0,n.Cn)(),e),P={class:"typed-text"},L=z((()=>(0,n._)("span",{class:"blinking-cursor"},"|",-1)));function j(e,t,r,s,i,a){return(0,n.wg)(),(0,n.iD)("h1",null,[(0,n.Uk)(" Utveksling "),(0,n._)("span",P,(0,n.zw)(e.typeValue),1),L,(0,n._)("span",{class:(0,n.C_)(["cursor",{typing:e.typeStatus}])}," ",2)])}var E={name:"UtvekslingLogo",components:{},data:()=>({typeValue:"",typeStatus:!1,displayTextArray:["exchange","intercambio","交流","تبادل","अदला-बदली","আদান-প্রদান","intercâmbio","обмен","交換","ਅਦਲਾ ਬਦਲੀ","Austausch","tukar guling","交換","교환","échange","అద్దె","एक्सचेंज","பரிவர்த்தனை","ایکسچینج","değiş tokuş","scambio","trao đổi","交流","shirya","แลกเปลี่ยน","એક્સચેંજ","ವಿನಿಮಯ","обмін","palitan","အရေးချိုးစနစ်","اشتراک"],typingSpeed:100,erasingSpeed:100,newTextDelay:2e3,displayTextArrayIndex:0,charIndex:0}),methods:{typeText(){this.charIndex<this.displayTextArray[this.displayTextArrayIndex].length?(this.typeStatus||(this.typeStatus=!0),this.typeValue+=this.displayTextArray[this.displayTextArrayIndex].charAt(this.charIndex),this.charIndex+=1,setTimeout(this.typeText,this.typingSpeed)):(this.typeStatus=!1,setTimeout(this.eraseText,this.newTextDelay))},eraseText(){this.charIndex>0?(this.typeStatus||(this.typeStatus=!0),this.typeValue=this.displayTextArray[this.displayTextArrayIndex].substring(0,this.charIndex-1),this.charIndex-=1,setTimeout(this.eraseText,this.erasingSpeed)):(this.typeStatus=!1,this.displayTextArrayIndex+=1,this.displayTextArrayIndex>=this.displayTextArray.length&&(this.displayTextArrayIndex=0),setTimeout(this.typeText,this.typingSpeed+1e3))}},created(){setTimeout(this.typeText,this.newTextDelay+200)}};const U=(0,v.Z)(E,[["render",j],["__scopeId","data-v-369946fd"]]);var M=U;const q=["data-index","onMouseover","onMouseleave"],F={class:"slide-card"},W={key:0,class:"card",style:{"max-width":"1000px",margin:"0 auto"}},N={class:"card-content"},Z={class:"media"},R={class:"media-content"},$={class:"title is-4"},H={class:"subtitle is-6"},J={class:"subtitle is-6 is-pulled-right"},V=(0,n._)("br",null,null,-1),Y={class:"title is-1 is-pulled-right",style:{"margin-right":"0.4rem"}},K=(0,n._)("summary",null,[(0,n._)("span",{style:{display:"inline-block",cursor:"pointer"}},"Rapporter")],-1),B=["href"],X=(0,n._)("br",null,null,-1),Q=(0,n._)("br",null,null,-1),G=(0,n._)("footer",{class:"card-footer"},null,-1);function ee(e,t,r,s,i,a){return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(n.W3,{name:"list",tag:"div",onBeforeEnter:a.beforeEnter,onEnter:a.enter},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.sortedUniversities,((e,t)=>((0,n.wg)(),(0,n.iD)("div",{key:e.number_id,"data-index":t,onMouseover:e=>a.scaleUpCard(t),onMouseleave:e=>a.resetCardScale(t)},[(0,n.wy)((0,n._)("div",F,[e.number_of_students>0?((0,n.wg)(),(0,n.iD)("div",W,[(0,n._)("div",N,[(0,n._)("div",Z,[(0,n._)("div",R,[(0,n._)("h2",$,(0,n.zw)(e.name),1),(0,n._)("p",H,(0,n.zw)(e.city)+", "+(0,n.zw)(e.country),1),(0,n.Wm)(n.uT,{name:"fade",mode:"out-in"},{default:(0,n.w5)((()=>[null!==r.last_input_program?((0,n.wg)(),(0,n.iD)("span",{key:r.last_input_program},[(0,n._)("p",J,[(0,n.Uk)(" rapport"+(0,n.zw)(a.getReportPluralSuffix(e.number_of_students))+" fra ",1),V,(0,n.Uk)(" "+(0,n.zw)(r.last_input_program),1)]),(0,n._)("p",Y,(0,n.zw)(e.number_of_students),1)])):(0,n.kq)("",!0)])),_:2},1024),(0,n._)("details",null,[K,(0,n._)("p",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.getReportIdList(e),(e=>((0,n.wg)(),(0,n.iD)("a",{key:e,href:a.getReportUrl(e)},[(0,n.Uk)(" rapport "+(0,n.zw)(e)+" ",1),X],8,B)))),128)),Q])])])])]),G])):(0,n.kq)("",!0)],512),[[n.F8,i.showCard]])],40,q)))),128))])),_:1},8,["onBeforeEnter","onEnter"])])}var te={name:"UniversityCards",data(){return{showCard:!1}},mounted(){setTimeout((()=>{this.showCard=!0}),200)},props:{universities:{type:Array,required:!0},last_input_program:{type:String,required:!0}},computed:{sortedUniversities(){return this.universities.slice().sort(((e,t)=>t.number_of_students-e.number_of_students))}},watch:{universities:{deep:!0,handler(){}}},methods:{scaleUpCard(e){const t=this.$el.querySelectorAll(".slide-card")[e];t.style.transition="transform 0.3s ease",t.style.transform="scale(1.007)"},resetCardScale(e){const t=this.$el.querySelectorAll(".slide-card")[e];t.style.transition="transform 0.3s ease",t.style.transform="scale(1)"},beforeEnter(e){e.style.opacity=0,e.style.transform="translateX(30px)"},enter(e,t){const r=100*e.dataset.index;setTimeout((()=>{e.style.transition="opacity 0.5s ease, transform 0.5s ease",e.style.opacity=1,e.style.transform="translateX(0)",e.addEventListener("transitionend",t)}),r)},getReportIdList(e){return e.report_id_list||[]},getReportPluralSuffix(e){return e>1?"er":""},getReportUrl(e){return`https://www.ntnu.no/studier/studier_i_utlandet/rapport/report_view.php?report_id=${e}&language=no`}}};const re=(0,v.Z)(te,[["render",ee]]);var ne=re,se={name:"App",data(){return{last_input_program:"",universities:[]}},async mounted(){await this.fetch_universities()},components:{LeafletMap:b,DropdownTextfield:I,UtvekslingLogo:M,UniversityCards:ne},methods:{handleTextFieldEvent(e){this.last_input_program=e.name,this.fetch_universities()},async fetch_universities(){try{const e=await y.Z.get("/api/university");this.universities=e.data.map((e=>({lat:parseFloat(e.lat),lng:parseFloat(e.lng),number_id:e.number_id,city:e.city,country:e.country,report_id_list:JSON.parse(e.programs_serialized.replace(/'/g,'"').replace(/,}/g,"}"))[this.last_input_program],number_of_students:JSON.parse(e.programs_serialized.replace(/'/g,'"').replace(/,}/g,"}"))[this.last_input_program]?JSON.parse(JSON.stringify(JSON.parse(e.programs_serialized.replace(/'/g,'"').replace(/,}/g,"}"))[this.last_input_program])).length:0,name:e.name})))}catch(e){console.error("Error fetching universities:",e)}}}};const ie=(0,v.Z)(se,[["render",u]]);var ae=ie;(0,n.ri)(ae).mount("#app")}},t={};function r(n){var s=t[n];if(void 0!==s)return s.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}r.m=e,function(){var e=[];r.O=function(t,n,s,i){if(!n){var a=1/0;for(p=0;p<e.length;p++){n=e[p][0],s=e[p][1],i=e[p][2];for(var o=!0,l=0;l<n.length;l++)(!1&i||a>=i)&&Object.keys(r.O).every((function(e){return r.O[e](n[l])}))?n.splice(l--,1):(o=!1,i<a&&(a=i));if(o){e.splice(p--,1);var u=s();void 0!==u&&(t=u)}}return t}i=i||0;for(var p=e.length;p>0&&e[p-1][2]>i;p--)e[p]=e[p-1];e[p]=[n,s,i]}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};r.t=function(n,s){if(1&s&&(n=this(n)),8&s)return n;if("object"===typeof n&&n){if(4&s&&n.__esModule)return n;if(16&s&&"function"===typeof n.then)return n}var i=Object.create(null);r.r(i);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&s&&n;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((function(e){a[e]=function(){return n[e]}}));return a["default"]=function(){return n},r.d(i,a),i}}(),function(){r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){r.f={},r.e=function(e){return Promise.all(Object.keys(r.f).reduce((function(t,n){return r.f[n](e,t),t}),[]))}}(),function(){r.u=function(e){return"js/"+e+".js"}}(),function(){r.miniCssF=function(e){}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="vueapp:";r.l=function(n,s,i,a){if(e[n])e[n].push(s);else{var o,l;if(void 0!==i)for(var u=document.getElementsByTagName("script"),p=0;p<u.length;p++){var c=u[p];if(c.getAttribute("src")==n||c.getAttribute("data-webpack")==t+i){o=c;break}}o||(l=!0,o=document.createElement("script"),o.charset="utf-8",o.timeout=120,r.nc&&o.setAttribute("nonce",r.nc),o.setAttribute("data-webpack",t+i),o.src=n),e[n]=[s];var d=function(t,r){o.onerror=o.onload=null,clearTimeout(m);var s=e[n];if(delete e[n],o.parentNode&&o.parentNode.removeChild(o),s&&s.forEach((function(e){return e(r)})),t)return t(r)},m=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),l&&document.head.appendChild(o)}}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){r.p="/utveksling/"}(),function(){var e={143:0};r.f.j=function(t,n){var s=r.o(e,t)?e[t]:void 0;if(0!==s)if(s)n.push(s[2]);else{var i=new Promise((function(r,n){s=e[t]=[r,n]}));n.push(s[2]=i);var a=r.p+r.u(t),o=new Error,l=function(n){if(r.o(e,t)&&(s=e[t],0!==s&&(e[t]=void 0),s)){var i=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;o.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",o.name="ChunkLoadError",o.type=i,o.request=a,s[1](o)}};r.l(a,l,"chunk-"+t,t)}},r.O.j=function(t){return 0===e[t]};var t=function(t,n){var s,i,a=n[0],o=n[1],l=n[2],u=0;if(a.some((function(t){return 0!==e[t]}))){for(s in o)r.o(o,s)&&(r.m[s]=o[s]);if(l)var p=l(r)}for(t&&t(n);u<a.length;u++)i=a[u],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return r.O(p)},n=self["webpackChunkvueapp"]=self["webpackChunkvueapp"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=r.O(void 0,[998],(function(){return r(795)}));n=r.O(n)})();
//# sourceMappingURL=app.js.map